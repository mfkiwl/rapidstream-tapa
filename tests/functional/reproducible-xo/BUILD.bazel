"""Tests that xo files generated by TAPA is reproducible."""

# Copyright (c) 2024 RapidStream Design Automation, Inc. and contributors.
# All rights reserved. The contributor(s) of this file has/have agreed to the
# RapidStream Contributor License Agreement.

load("//bazel:tapa_rules.bzl", "tapa_xo")

tapa_xo(
    name = "vadd-xo",
    src = "//tests/apps/vadd:vadd.cpp",
    hdrs = ["//tests/apps/vadd:vadd.h"],
    include = ["//tests/apps/vadd:."],
    platform_name = "xilinx_u250_gen3x16_xdma_4_1_202210_1",
    top_name = "VecAdd",
)

sh_test(
    name = "reproducible-xo-test",
    srcs = ["reproducible-xo-test.sh"],
    args = [
        "$(location :vadd-xo)",
        "$(location //tests/apps/vadd:vadd-xo)",
    ],
    data = [
        ":vadd-xo",
        "//tests/apps/vadd:vadd-xo",
    ],
)
